# 7장 - 아이템 48 스트림 병렬화는 주의해서 적용하라

### 동시성과 병렬성
- 동시성이란 싱글 코어에서 멀티 스레드로 일이 작업되는 것을 말하고
- 병렬성이란 멀티 코어에서 멀티 스레드로 일이 작업되는 것을 말한다


### 스트림 병렬화
- 동시성 프로그래밍에서 안전성과 응답가능상태를 유지하는데에 힘을 써야함.
- 자바에서는 동시성 프로그래밍을 항상 지원하려고 노력함.
- 자바5 동시성 컬렉션 java.util.concurrent 라이브러리, 실행자 프레임워크
- 자바7 고성능 병렬 분해 프레임워크 포크-조인패키지
- 자바8 스트림 병렬화


### 스트림 병렬화 사용하기 좋을때
- ArrayList, HashMap, HashSet, ConcurrentHashMap의 인스턴스거나 배열, int 범위, long 범위일 때 병렬화의 효과가 가장 좋다.
- 이 자료구조들은 모두 데이터를 원하는 크기로 정확하게 손쉽게 나눌 수 있어서 일을 다수의 스레드에 분배하기에 좋다는 특징이 있다.
- 또한 원소들을 순차적으로 실행할때 참조 지역성이 뛰어나다.(기본타입=배열)
- ※참조지역성 : 이웃한 원소의 참조들이 메모리에 연속해서 저장되어 있다


### 스트림 병렬화 적용전 고려사항
- 오직 성능 최적화 수단이므로 변경 전후를 반드시 성능 테스트 하여 가치가 있는지 확인하여야 함.
- 다른 부분의 성능에까지 악영향을 있을수 있으므로 많은 테스트가 필요.


## 정리
스트림 병렬화를 잘못 사용하면 성능이 나빠지고 결과자체가 잘못된 결과를 받아볼수 있다.   
대부분의 경우 스트림 병령화로 효과를 보는 경우가 매우 적을 것이라고 한다.   
이러한 것이 있다고 정도로만 알고 거의 사용하지 않되, 정말 사용하게 된다면 조건을 잘 갖추어서 사용하자.   